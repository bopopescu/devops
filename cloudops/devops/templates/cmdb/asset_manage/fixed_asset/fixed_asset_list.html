{% extends 'table.html' %}
{% load staticfiles %}
{% block page_title %}{% endblock %}
{% block table_title %}
    <div class="ivu-btn-group pull-left" style="padding-left: 0; padding-bottom: 5px;">
        <button id="asset_search_btid" type="button" class="ivu-btn ivu-btn-primary" onclick="viewsCutover(1)">资产查询</button>
        <button id="asset_type_btid" type="button" class="ivu-btn ivu-btn-ghost" onclick="viewsCutover(2)">资产类型管理</button>
        <button id="asset_supplier_btid" type="button" class="ivu-btn ivu-btn-ghost" onclick="viewsCutover(3)">供应商管理</button>
        <button id="" type="button" class="ivu-btn ivu-btn-ghost" data-toggle="modal" data-target="#CountModal">库存统计</button>
    </div>
    <div id="asset_bt_group" class="pull-right">
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" data-toggle="modal" data-target="#myModal">添加</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" data-toggle="modal" data-target="#myModal" data-id="1">修改</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" onclick="openAssetOut()">借出</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" onclick="openAssetBack()">归还</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" onclick="openAssetMaintain()">维修</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" onclick="openAssetScrap()">报废</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" onclick="confirmDelete()">删除</button>
        <button id="importBtn" type="button" class="ivu-btn ivu-btn-primary"data-toggle="modal" data-target="#importModal">导入</button>
        <button id="exportBtn" type="button" class="export-excel ivu-btn ivu-btn-primary" data-table="#table">导出</button>
        <button id="customExportBtn" type="button" class="ivu-btn ivu-btn-primary" data-toggle="modal" data-target="#customExportModal">自定义导出</button>
    </div>
    <div id="type_bt_group" class="pull-right" style="display: none">
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" data-toggle="modal" data-target="#assetTypeAddModal">添加</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" data-toggle="modal" data-target="#assetTypeAddModal" data-id="1">修改</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" onclick="confirmTypeDelete()">删除</button>
    </div>
    <div id="supplier_bt_group" class="pull-right" style="display: none">
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" data-toggle="modal" data-target="#assetSupplierChangeModal">添加</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" data-toggle="modal" data-target="#assetSupplierChangeModal" data-id="1">修改</button>
        <button id="" type="button" class="ivu-btn ivu-btn-primary pull-left" onclick="confirmSupplierDelete()">删除</button>
    </div>
{% endblock %}
{% block tinymce_js %}{% endblock %}
{% block ext_before %}
    <link rel="stylesheet" href="{% static 'ztree/css/metroStyle/metroStyle.css' %}" type="text/css">
    <link href="{% static 'jedate/jedate.css' %}" rel="stylesheet" />
    <link href="{% static 'bootstrap-datetimepicker/css/bootstrap-datetimepicker.css' %}" rel="stylesheet" />
    <link href="{% static 'css/asset_list.css' %}" rel="stylesheet" />
    <style>
    #custom_export_select_field_id .bootstrap-select {
        padding: 0;
    }
    /*导入*/
    #file , #file_inout{
        position: relative;
        display: inline-block;
        background: transparent;
        border: 1px solid #CCCCCC;
        border-radius: 4px;
        padding: 1px 5px;
        overflow: hidden;
        color: #1E88C7;
        text-decoration: none;
        text-indent: 0;
        line-height: 18px;

    }
    #file input ,#file_inout input{
        position: absolute;
        font-size: 100px;
        right: 0;
        top: 0;
        opacity: 0;
        cursor:pointer;
    }
    #file:hover , #file_inout:hover{
        background: #FFFFFF;
        border-color: #CCCCCC;
        color: #004974;
        text-decoration: none;
    }
    pre {
        white-space: pre-wrap;
        word-wrap: break-word;
    }
    </style>
{% endblock %}
{% block ext_button %}
    <!-- 搜索栏 -->
    <form class="form-horizontal" action="#" id="searchAssetId">
        <div class="col-md-12 col-sm-12 col-xs-12">
            <div id="asset_search">
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">编号</label></div>
                    <div class="col-md-8"><input class="ivu-input" type="text" name="asset_id_input" placeholder="多个用英文逗号','分隔"></div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">类型</label></div>
                    <div class="col-md-8">
                        <select class="selectpicker show-tick form-control" id="asset_type_id" name="type_input" multiple></select>
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">供应商</label></div>
                    <div class="col-md-8">
                        <select class="selectpicker show-tick form-control" id="supplier_id" name="supplier_input" multiple></select>
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">状态</label></div>
                    <div class="col-md-8">
                        <select class="selectpicker show-tick form-control" name="status_input" multiple>
                            <option value=1>在库</option>
                            <option value=2>借出</option>
                            <option value=3>维修</option>
                            <option value=4>报废</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">操作人</label></div>
                    <div class="col-md-8">
                        <select class="selectpicker show-tick form-control" id="operator_id" name="operator_input" data-live-search="true"></select>
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">采购日期</label></div>
                    <div class="col-md-8">
                        <input name="buydata_search_input_name" class="ivu-input timeselect_input" type="text" autocomplete="off" style="font-size:10px;">
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">领用人</label></div>
                    <div class="col-md-8">
                        <input class="ivu-input" type="text" name="user_name">
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">领用部门</label></div>
                    <div class="col-md-8">
                        <input class="ivu-input" type="text" name="org_search_input_name" id="org_search_input_id" data-toggle="modal" data-target="#orgModal">
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">领用日期</label></div>
                    <div class="col-md-8">
                        <input class="ivu-input timeselect_input" type="text" name="lend_time_input_name" id="lend_time_input">
                    </div>
                </div>
                <div class="col-md-2 col-sm-6 col-xs-12" style="min-width: 241px;">
                    <div class="col-md-4"><label class="ivu-form-item-label pull-left" style="line-height: 34px;">资产信息</label></div>
                    <div class="col-md-8">
                        <input class="ivu-input" type="text" name="asset_info_search_input" placeholder='同时匹配用"&"分隔'>
                    </div>
                </div>
                <div id="lend_count_search"></div>
            </div>
            <div class="ivu-form-item-content pull-left">
                <div class="col-md-12">
                <a href="javascript:void(0);" id="searchAssets" class="ivu-btn ivu-btn-circle ivu-btn-primary ivu-btn-circle-outline">
                    <i class="fa fa-search"></i> 搜索 </a>
                <a href="javascript:;" class="ivu-btn ivu-btn-circle ivu-btn-ghost ivu-btn-circle-outline" onclick="formReset()">
                    <i class="fa fa-print"></i> 重置 </a>
                </div>
            </div>
        </div>
    </form>
    <!-- /.搜索栏结束 -->
    <script src="{% static 'js/aukeyops/searchTable.js' %}"></script>

    <!-- 添加资产模态框 -->
    <div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="change_asset_title_id">添加资产</h4>
                </div>
                <form id="add_asset_form" action="#" class="form-horizontal form-label-left">
                    <input type="hidden" name="hidden_add_asset_id_input" id="hidden_add_asset_id">
                    <div class="modal-body roll" style="max-height: 450px;overflow-y: auto">
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">资产编号 <span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="add_asset_id" name="add_asset_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                            <label class="ivu-form-item-label pull-left col-md-2">资产类型 <span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <select class="selectpicker show-tick form-control" id="add_asset_type_id" name="add_asset_type"></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">状态 <span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <select class="selectpicker show-tick form-control" id="add_status_id" name="add_status_name">
                                    <option></option>
                                    <option value=1>在库</option>
                                    <option value=2>借出</option>
                                    <option value=3>维修</option>
                                    <option value=4>报废</option>
                                </select>
                            </div>
                            <label class="ivu-form-item-label pull-left col-md-2">供应商</label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <select class="selectpicker show-tick form-control" id="add_supplier_id" name="add_supplier_name"></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">采购日期</label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="add_buydate_id" name="add_buydate_name" class="ivu-input" type="text" autocomplete="off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">备注</label>
                            <div class="col-md-10 col-sm-10 col-xs-12">
                                <textarea id="add_remark_id" name="add_remark_name" class="ivu-input"></textarea>
                            </div>
                        </div>
                        <div id="add_my_field_group"></div>
                        <div id="add_item_group"></div>
                        <label class="ivu-form-item-label pull-left col-md-2"></label>
                        <button type="button" class="ivu-btn ivu-btn-dashed" onclick="addItem()"><span>添加字段</span></button>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="ivu-btn ivu-btn-primary" data-style="expand-left" id="add_submit_btn" onclick="addAsset()">
                            <span class="ladda-label"> 确认 </span>
                        </button>
                        <button type="button" class="ivu-btn ivu-btn-ghost" data-dismiss="modal">取消</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.添加资产模态框结束 -->

    <!-- 资产借出模态框 -->
    <div class="modal fade" id="assetOutModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">资产借出</h4>
                </div>
                <form id="asset_out_form" action="#" class="form-horizontal form-label-left">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">资产编号 <span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="asset_out_id" name="asset_out_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                            <label class="ivu-form-item-label pull-left col-md-2">领用人 <span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="asset_use_person_id" name="asset_use_person" class="ivu-input" type="text">
{#                                <select class="selectpicker show-tick form-control" id="asset_use_person_id" name="asset_use_person"></select>#}
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">备注</label>
                            <div class="col-md-10 col-sm-10 col-xs-12">
                                <textarea id="remark_out_id" name="remark_out_name" class="ivu-input"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="ivu-btn ivu-btn-primary" data-style="expand-left" id="asset_out_submit_btn" onclick="ActionassetOut()">
                            <span class="ladda-label"> 确认 </span>
                        </button>
                        <button type="button" class="ivu-btn ivu-btn-ghost" data-dismiss="modal">取消</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.资产借出模态框结束 -->

    <!-- 资产还回模态框 -->
    <div class="modal fade" id="assetBackModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">资产归还</h4>
                </div>
                <form id="asset_back_form" action="#" class="form-horizontal form-label-left">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">资产编号 <span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="asset_back_id" name="asset_back_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                            <label class="ivu-form-item-label pull-left col-md-2">归还人<span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="asset_back_person_id" name="asset_back_person" class="ivu-input" type="text">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">备注</label>
                            <div class="col-md-10 col-sm-10 col-xs-12">
                                <textarea id="remark_back_id" name="remark_back_name" class="ivu-input">资产正常,可以入库！</textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="ivu-btn ivu-btn-primary" data-style="expand-left" id="asset_back_submit_btn" onclick="ActionassetBack()">
                            <span class="ladda-label"> 确认 </span>
                        </button>
                        <button type="button" class="ivu-btn ivu-btn-ghost" data-dismiss="modal">取消</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.资产还回模态框结束 -->

    <!-- 资产维修模态框 -->
    <div class="modal fade" id="assetMaintainModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">资产维修</h4>
                </div>
                <form id="asset_maintain_form" action="#" class="form-horizontal form-label-left">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">资产编号 <span class="required">*</span>
                            </label>
                            <div class="col-md-3 col-sm-3 col-xs-12">
                                <input id="asset_maintain_id" name="asset_maintain_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                            <label class="ivu-form-item-label pull-left col-md-2">维修方 <span class="required">*</span>
                            </label>
                            <div class="col-md-3 col-sm-3 col-xs-12">
                                <input id="asset_maintain_person_id" name="asset_maintain_person" class="ivu-input" type="text">
                            </div>
                            <div>
                                <label class="ivu-form-item-label select-supplier">
                                    <input type="checkbox" id="supplier_ma_input_id" name="supplier_ma_name">
                                    <span>供应商维修</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">备注</label>
                            <div class="col-md-10 col-sm-10 col-xs-12">
                                <textarea id="remark_maintain_id" name="remark_maintain_name" class="ivu-input"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="ivu-btn ivu-btn-primary" data-style="expand-left" id="asset_maintain_submit_btn" onclick="ActionassetMaintain()">
                            <span class="ladda-label"> 确认 </span>
                        </button>
                        <button type="button" class="ivu-btn ivu-btn-ghost" data-dismiss="modal">取消</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.资产维修模态框结束 -->

    <!-- 资产报废模态框 -->
    <div class="modal fade" id="assetScrapModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">资产报废</h4>
                </div>
                <form id="asset_scrap_form" action="#" class="form-horizontal form-label-left">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">资产编号 <span class="required">*</span>
                            </label>
                            <div class="col-md-3 col-sm-3 col-xs-12">
                                <input id="asset_scrap_id" name="asset_scrap_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">备注</label>
                            <div class="col-md-10 col-sm-10 col-xs-12">
                                <textarea id="remark_scrap_id" name="remark_scrap_name" class="ivu-input"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="ivu-btn ivu-btn-primary" data-style="expand-left" id="asset_scrap_submit_btn" onclick="ActionassetScrap()">
                            <span class="ladda-label"> 确认 </span>
                        </button>
                        <button type="button" class="ivu-btn ivu-btn-ghost" data-dismiss="modal">取消</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.资产报废模态框结束 -->

    <!-- 资产类型编辑模态框 -->
    <div class="modal fade" id="assetTypeAddModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="type_title_id">添加资产类型</h4>
                </div>
                <form id="asset_type_add_form" action="#" class="form-horizontal form-label-left">
                    <input id="asset_form_type_id" name="asset_form_type_name" type="hidden">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">类型名称 <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input id="asset_type_add_id" name="asset_type_add_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">定制资产字段</label>
                            <div class="col-md-10 col-sm-10 col-xs-12">
                                <div class="type_add_tags" id="tags" tabindex="1">
                                    <input id="form-field-tags" type="text" placeholder="请输入字段名 ..." value="Tag Input Control" name="tags" style="display: none;"/>
                                    <input type="text" placeholder="（选填）输入字段名 ..." class="tags_enter" autocomplete="off" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="ivu-btn ivu-btn-primary" data-style="expand-left" onclick="ActionassetTypeAdd()">
                            <span class="ladda-label"> 确认 </span>
                        </button>
                        <button type="button" class="ivu-btn ivu-btn-ghost" data-dismiss="modal">取消</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.资产类型编辑模态框结束assetSupplierChangeModal -->

    <!-- 供应商编辑模态框 -->
    <div class="modal fade" id="assetSupplierChangeModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="supplier_title_id">添加供应商</h4>
                </div>
                <form id="asset_supplier_change_form" action="#" class="form-horizontal form-label-left">
                    <input id="change_supplier_id" name="change_supplier_id_name" type="hidden">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">供应商名称 <span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="change_supplier_name_id" name="change_supplier_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                            <label class="ivu-form-item-label pull-left col-md-2">联系人</label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="change_supplier_contact_id" name="change_supplier_contact_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">固定电话</label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="change_supplier_fixed_telephone_id" name="change_supplier_fixed_telephone_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                            <label class="ivu-form-item-label pull-left col-md-2">手机号码</label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="change_supplier_mobile_phone_id" name="change_supplier_mobile_phone_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">地址</label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="change_supplier_address_id" name="change_supplier_address_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                            <label class="ivu-form-item-label pull-left col-md-2">邮箱</label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="change_supplier_email_id" name="change_supplier_email_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">QQ</label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <input id="change_supplier_qq_id" name="change_supplier_qq_name" class="ivu-input" required="required" type="text" autocomplete="off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">备注</label>
                            <div class="col-md-10 col-sm-10 col-xs-12">
                                <textarea id="change_supplier_remark_id" name="change_supplier_remark_name" class="ivu-input"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="ivu-btn ivu-btn-primary" data-style="expand-left" onclick="ActionassetSupplierChange()">
                            <span class="ladda-label"> 确认 </span>
                        </button>
                        <button type="button" class="ivu-btn ivu-btn-ghost" data-dismiss="modal">取消</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.供应商编辑框结束 -->

    <!-- 组织结构模态框 -->
    <div class="modal fade" id="orgModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">组织结构</h4>
                </div>
                <div class="modal-body">
                    <ul id="treeDemo" class="ztree"></ul>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.组织结构模态框结束 -->

    <!-- 资产统计模态框 -->
    <div class="modal fade" id="CountModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">库存统计</h4>
                </div>
                <div class="modal-body">
                    <table class="table table-striped table-bordered dt-responsive nowrap" style="color:#495060">
                        <thead>
                            <tr><th>资产类型</th><th>在库数量</th><th>借出数量</th><th>维修数量</th><th>报废数量</th><th>统计</th></tr>
                        </thead>
                        <tbody id="asset_count_tbody_id">
                        </tbody>
                    </table>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.资产统计模态框结束 -->

    <!-- 导入模态框 -->
    <div class="modal fade" id="importModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">导入</h4>
                </div>
                <div class="modal-body">
                    <pre id="upload_pre"><span style="color:red">导入格式（必须按顺序写入到xls文件，第一行的标题如下）：</span><br><p>  <b>资产：</b>资产编号、资产类型、资产状态、采购日期、供应商、使用人、领用时间、备注、供应商、其他（其他信息写在后面）</p><br><p>  <b>出入记录：</b>经手人、资产编号、类型、操作人、操作时间、备注</p><br><p>  注意：资产状态只能有4种：“在库”、“借出”、“维修”、“报废”。 不是这4种状态默认转换为“在库”】</p><br><p>  每次最多只能导入10000条数据</p><br><p>  日期格式：yyyy-m-d</p><br><p>  时间格式：yyyy-m-d h:mm:ss</p></pre>
                    <a href="javascript:FileUpload()" class="file btn btn-xs" id="file">导入资产<input type="file" name="file" id="file_upload" accept="application/msword"></a>
                    <a href="javascript:FileUpload()" class="file btn btn-xs" id="file_inout">导入资产出入库记录<input type="file" name="file" id="file_inout_upload" accept="application/msword"></a>
                    <div id="progress_div_id" style="display: none">
                        <span id="percentage"></span>
                        <div class="progress progress_sm" style="width: 50%;">
                          <div id="fileupdate_progressbar_id" class="progress-bar bg-green" role="progressbar" data-transitiongoal="0"></div>
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.导入模态框结束 -->

    <!-- 按类型导出 -->
    <div class="modal fade" id="customExportModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="z-index: 2041;">
            <div class="ivu-spin ivu-spin-fix" id="export_loading_id" style="display: none;">
            <div class="ivu-spin-main">
                <span class="ivu-spin-dot"></span>
                <div class="ivu-spin-text"></div>
                <div>正在导出</div>
            </div>
        </div>
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">按类型导出</h4>
                    <h5 style="color: red">按所选字段导出选中类型下的所有记录</h5>
                </div>
                <form id="custom_export_form_id" action="#" class="form-horizontal form-label-left">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">资产类型 <span class="required">*</span>
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <select id="custom_export_asset_type_id" class="selectpicker" name="type"></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ivu-form-item-label pull-left col-md-2">导出字段 <span class="required">*</span></label>
                            <div class="col-md-10 col-sm-10 col-xs-12" id="custom_export_select_field_id">
                                <select class="col-md-12 selectpicker" multiple id="custom_export_field_id" name="field"></select>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="modal-footer">
                    <button type="button" class="ivu-btn ivu-btn-primary" data-style="expand-left" onclick="CustomExportSubmit()">
                        <span class="ladda-label"> 确认 </span>
                    </button>
                    <button type="button" class="ivu-btn ivu-btn-ghost" data-dismiss="modal">取消</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <!-- /.按类型导出 -->
{% endblock %}
{% block ext_script %}
    <script src="{% static 'ztree/js/jquery.ztree.core.js' %}"></script>
    <script src="{% static 'bootstrap/js/spin.min.js' %}"></script>
    <script src="{% static 'bootstrap/js/ladda.min.js' %}"></script>
    <script src="{% static 'bootstrap-datetimepicker/js/moment-with-locales.js' %}"></script>
    <script src="{% static 'bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js' %}"></script>
    <script src="{% static 'jedate/jedate.js' %}"></script>
    <script src="{% static 'js/aukeyops/JsonExportExcel.min.js' %}"></script>
    <script src="{% static 'js/aukeyops/asset_list.min.js' %}"></script>
    <script>
    // 上传附件
    $(function() {
        $("#file").on("change", "input[type='file']", function() {
            var form_data = new FormData();
            var file_get = $('#file_upload')[0];
            var file_info = file_get.files[0];
            form_data.append("file",file_info);
            if(file_info==undefined){ //判断是否有附件
                alert('你没有选择任何文件');
                $(this).val('');
                return false
            }
            var fileSize = file_info.size;
             //35160  计算机存储数据最为常用的单位是字节(B)
             //在此处我们限制文件大小为50M
            if(fileSize==-1){
                 alert('"您的浏览器暂不支持计算上传文件的大小，确保上传文件不要超过50M，建议使用 Chrome（谷歌）浏览器。";');
                 $(this).val('');
                 return false;
             }
            if(fileSize>50*1024*1024){
                new PNotify({
                    title: 'ERROR',
                    text: '文件过大, 请上传小于50M的文件！',
                    type: 'error',
                    styling: 'bootstrap3'
                });
                $(this).val('');
                return false;
            }
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {//服务器返回值的处理函数，此处使用匿名函数进行实现
                if (xhr.readyState == 4 && xhr.status == 200) {//
                    var responseText = xhr.responseText;
                    result_dict = JSON.parse(unescape(responseText.replace(/\\u/g, '%u')));
                    new PNotify({
                      title: result_dict.title,
                      text: result_dict.result,
                      type: result_dict.status,
                      styling: 'bootstrap3'
                    });
                    old_html = document.getElementById("percentage").innerHTML;
                    if (result_dict.status == 'success') {
                        document.getElementById("percentage").innerHTML = old_html + ' <span style="color:green"> '+result_dict.result+'</span>';
                    }else{
                        document.getElementById("percentage").innerHTML = '<span style="color:red">'+result_dict.result+'</span>';
                    }
                }
            };
            xhr.upload.addEventListener('progress',on_progress,false);     //xhr对象含有一个upload对象，它有一个progress事件，在文件上传过程中会被不断触发，我们为这个事件对应一个处理函数，每当事件触发就会调用这个函数，于是便可利用这个函数来修改当前进度，更多细节可自行查询
            $("#progress_div_id").css("display","block");
            xhr.open('POST','/cmdb/asset_manage/fixed_asset/asset_import/',true);  //请将url改成上传url
            xhr.setRequestHeader('X-CSRFTOKEN','{{ request.COOKIES.csrftoken }}');   //此处为Django要求，可无视，或者换成相应后台所要求的CSRF防护，不是django用户请去掉
            xhr.send(form_data);   //发送表单

            function on_progress(evt) {       //看这个函数之前先看upload函数。这个函数可以接收一个evt(event)对象(细节自行查询progress)，他有3个属性lengthComputable，loaded，total，第一个属性是个bool类型的，代表是否支持，第二个代表当前上传的大小，第三个为总的大小，由此便可以计算出实时上传的百分比
                if(evt.lengthComputable) {
                    var percent = Math.round((evt.loaded) * 100 / evt.total);
                    $('#fileupdate_progressbar_id').attr('data-transitiongoal', percent).progressbar();
                    document.getElementById("percentage").innerHTML =percent+"%";
                    if (percent == 100){
                        $('#importModal').modal('hide');
                        $('#table').bootstrapTable("refresh");
                    }
                }
            }
        });
        $("#file_inout").on("change", "input[type='file']", function() {
            var form_data = new FormData();
            var file_get = $('#file_inout_upload')[0];
            var file_info = file_get.files[0];
            form_data.append("file",file_info);
            if(file_info==undefined){ //判断是否有附件
                alert('你没有选择任何文件');
                $(this).val('');
                return false
            }
            var fileSize = file_info.size;
             //35160  计算机存储数据最为常用的单位是字节(B)
             //在此处我们限制文件大小为50M
            if(fileSize==-1){
                 alert('"您的浏览器暂不支持计算上传文件的大小，确保上传文件不要超过50M，建议使用 Chrome（谷歌）浏览器。";');
                 $(this).val('');
                 return false;
             }
            if(fileSize>50*1024*1024){
                new PNotify({
                    title: 'ERROR',
                    text: '文件过大, 请上传小于50M的文件！',
                    type: 'error',
                    styling: 'bootstrap3'
                });
                $(this).val('');
                return false;
            }
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {//服务器返回值的处理函数，此处使用匿名函数进行实现
                if (xhr.readyState == 4 && xhr.status == 200) {//
                    var responseText = xhr.responseText;
                    result_dict = JSON.parse(unescape(responseText.replace(/\\u/g, '%u')));
                    new PNotify({
                      title: result_dict.title,
                      text: result_dict.result,
                      type: result_dict.status,
                      styling: 'bootstrap3'
                    });
                    old_html = document.getElementById("percentage").innerHTML;
                    if (result_dict.status == 'success') {
                        document.getElementById("percentage").innerHTML = old_html + ' <span style="color:green"> '+result_dict.result+'</span>';
                    }else{
                        document.getElementById("percentage").innerHTML = '<span style="color:red">'+result_dict.result+'</span>';
                    }
                }
            };
            xhr.upload.addEventListener('progress',on_progress,false);     //xhr对象含有一个upload对象，它有一个progress事件，在文件上传过程中会被不断触发，我们为这个事件对应一个处理函数，每当事件触发就会调用这个函数，于是便可利用这个函数来修改当前进度，更多细节可自行查询
            $("#progress_div_id").css("display","block");
            xhr.open('POST','/cmdb/asset_manage/fixed_asset/asset_flow_import/',true);  //请将url改成上传url
            xhr.setRequestHeader('X-CSRFTOKEN','{{ request.COOKIES.csrftoken }}');   //此处为Django要求，可无视，或者换成相应后台所要求的CSRF防护，不是django用户请去掉
            xhr.send(form_data);   //发送表单

            function on_progress(evt) {       //看这个函数之前先看upload函数。这个函数可以接收一个evt(event)对象(细节自行查询progress)，他有3个属性lengthComputable，loaded，total，第一个属性是个bool类型的，代表是否支持，第二个代表当前上传的大小，第三个为总的大小，由此便可以计算出实时上传的百分比
                if(evt.lengthComputable) {
                    var percent = Math.round((evt.loaded) * 100 / evt.total);
                    $('#fileupdate_progressbar_id').attr('data-transitiongoal', percent).progressbar();
                    document.getElementById("percentage").innerHTML =percent+"%";
                    if (percent == 100){
                        $('#importModal').modal('hide');
                        $('#table').bootstrapTable("refresh");
                    }
                }
            }
        });
    });
    </script>
{% endblock %}